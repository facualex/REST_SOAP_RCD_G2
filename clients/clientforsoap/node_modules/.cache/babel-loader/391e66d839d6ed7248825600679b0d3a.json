{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/facun/Documents/REST_SOAP_RCD_G2/clients/clientforsoap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/facun/Documents/REST_SOAP_RCD_G2/clients/clientforsoap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/facun/Documents/REST_SOAP_RCD_G2/clients/clientforsoap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/facun/Documents/REST_SOAP_RCD_G2/clients/clientforsoap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import cogoToast from\"cogo-toast\";import{useState}from\"react\";import axios from\"axios\";import XMLParser from'react-xml-parser';import\"./index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={namesInput:\"\",names:\"\",lastNames:\"\",isLoading:false};function App(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var namesInput=state.namesInput,names=state.names,lastNames=state.lastNames,isLoading=state.isLoading;var xmlRequest=\"\\n    <Envelope xmlns=\\\"http://schemas.xmlsoap.org/soap/envelope/\\\">\\n    <Body>\\n        <splitNames xmlns=\\\"names:namesservicewsdl\\\">\\n            <name>\".concat(namesInput,\"</name>\\n        </splitNames>\\n     </Body>\\n    </Envelope>\\n  \");function setField(event){var value=event.target.value;setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{namesInput:value});});}function handleSplitClick(){return _handleSplitClick.apply(this,arguments);}function _handleSplitClick(){_handleSplitClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parsedXMLResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(namesInput){_context.next=4;break;}setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{namesInput:\"\"});});return _context.abrupt(\"return\",cogoToast.error(\"Debes ingresar nombres y apellidos para realizar el split.\"));case 4:if(!(namesInput.split(\" \").filter(function(name){return name;}).length<3)){_context.next=7;break;}setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{namesInput:\"\"});});return _context.abrupt(\"return\",cogoToast.error(\"Debes ingresar al menos un nombre, apellido paterno y apellido materno.\"));case 7:setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoading:true});});// const response = await fetch(\n// `${process.env.REACT_APP_API_URI}/getDv.php/${rut}`\n//);\n//const jsonResponse = await response.json();\n//if (jsonResponse && jsonResponse.data) {\n//  setState((prevState) => ({\n//    ...prevState,\n//    dv: jsonResponse.data,\n//    isLoading: false,\n//  }));\n//  return cogoToast.success(\"Digito verificador calculado con éxito!\");\n// }\n_context.next=10;return axios.post(\"\".concat(process.env.REACT_APP_API_URI,\"?wsdl\"),xmlRequest,{headers:{\"Content-Type\":\"text/xml\"}});case 10:response=_context.sent;parsedXMLResponse=new XMLParser().parseFromString(response.data);console.log(response.data);console.log(parsedXMLResponse);_context.next=21;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:\"\",isLoading:false});});cogoToast.error(_context.t0);console.log(_context.t0);case 21:case\"end\":return _context.stop();}}},_callee,null,[[0,16]]);}));return _handleSplitClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"header__text\",children:\"Split de nombres y apellidos\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-rut-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"main-rut\",children:\"Ingrese nombres y apellidos\"}),/*#__PURE__*/_jsx(\"input\",{name:\"rut\",placeholder:\"Ejemplo: Juan Jos\\xE9 Rodriguez Hernandez\",value:namesInput,className:\"main-rut\",id:\"main-rut\",onChange:setField,autoComplete:\"off\"})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"calculate-button\",onClick:handleSplitClick,children:isLoading?\"Cargando...\":\"Realizar Split\"})]})]});}export default App;","map":{"version":3,"sources":["C:/Users/facun/Documents/REST_SOAP_RCD_G2/clients/clientforsoap/src/screens/App/index.js"],"names":["cogoToast","useState","axios","XMLParser","initialState","namesInput","names","lastNames","isLoading","App","state","setState","xmlRequest","setField","event","value","target","prevState","handleSplitClick","error","split","filter","name","length","post","process","env","REACT_APP_API_URI","headers","response","parsedXMLResponse","parseFromString","data","console","log","dv"],"mappings":"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","sourcesContent":["import cogoToast from \"cogo-toast\";\r\nimport { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport XMLParser from 'react-xml-parser';\r\nimport \"./index.css\";\r\n\r\nconst initialState = {\r\n  namesInput: \"\",\r\n  names: \"\",\r\n  lastNames: \"\",\r\n  isLoading: false,\r\n};\r\n\r\nfunction App() {\r\n  const [state, setState] = useState(initialState);\r\n\r\n  const { namesInput, names, lastNames, isLoading } = state;\r\n\r\n  let xmlRequest = `\r\n    <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\">\r\n    <Body>\r\n        <splitNames xmlns=\"names:namesservicewsdl\">\r\n            <name>${namesInput}</name>\r\n        </splitNames>\r\n     </Body>\r\n    </Envelope>\r\n  `;\r\n\r\n  function setField(event) {\r\n    const { value } = event.target;\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      namesInput: value,\r\n    }));\r\n  }\r\n\r\n  async function handleSplitClick() {\r\n    try {\r\n      if (!namesInput) {\r\n        setState((prevState) => ({\r\n          ...prevState,\r\n          namesInput: \"\",\r\n        }));\r\n\r\n        return cogoToast.error(\r\n          \"Debes ingresar nombres y apellidos para realizar el split.\"\r\n        );\r\n      }\r\n\r\n      // Valida que se ingrese al menos un nombre y apellido paterno y materno\r\n      if (namesInput.split(\" \").filter(name => name).length < 3) {\r\n        setState((prevState) => ({\r\n          ...prevState,\r\n          namesInput: \"\",\r\n        }));\r\n\r\n        return cogoToast.error(\r\n          \"Debes ingresar al menos un nombre, apellido paterno y apellido materno.\"\r\n        );\r\n      }\r\n\r\n      setState((prevState) => ({\r\n        ...prevState,\r\n        isLoading: true,\r\n      }));\r\n\r\n      // const response = await fetch(\r\n      // `${process.env.REACT_APP_API_URI}/getDv.php/${rut}`\r\n      //);\r\n      //const jsonResponse = await response.json();\r\n\r\n      //if (jsonResponse && jsonResponse.data) {\r\n      //  setState((prevState) => ({\r\n      //    ...prevState,\r\n      //    dv: jsonResponse.data,\r\n      //    isLoading: false,\r\n      //  }));\r\n      //  return cogoToast.success(\"Digito verificador calculado con éxito!\");\r\n      // }\r\n\r\n      const response = await axios.post(`${process.env.REACT_APP_API_URI}?wsdl`, xmlRequest, {\r\n        headers: { \"Content-Type\": \"text/xml\" }\r\n      })\r\n\r\n      const parsedXMLResponse = new XMLParser().parseFromString(response.data);\r\n      console.log(response.data)\r\n      console.log(parsedXMLResponse)\r\n\r\n    } catch (error) {\r\n      setState((prevState) => ({\r\n        ...prevState,\r\n        dv: \"\",\r\n        isLoading: false,\r\n      }));\r\n\r\n      cogoToast.error(error);\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"header\">\r\n        <h1 className=\"header__text\">Split de nombres y apellidos</h1>\r\n      </div>\r\n      <div className=\"input-group-container\">\r\n        <div className=\"input-group\">\r\n          <div className=\"main-rut-group\">\r\n            <label htmlFor=\"main-rut\">Ingrese nombres y apellidos</label>\r\n            <input\r\n              name=\"rut\"\r\n              placeholder=\"Ejemplo: Juan José Rodriguez Hernandez\"\r\n              value={namesInput}\r\n              className=\"main-rut\"\r\n              id=\"main-rut\"\r\n              onChange={setField}\r\n              autoComplete=\"off\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <button className=\"calculate-button\" onClick={handleSplitClick}>\r\n          {isLoading ? \"Cargando...\" : \"Realizar Split\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}