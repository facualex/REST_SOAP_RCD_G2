{"ast":null,"code":"import _regeneratorRuntime from\"/Users/facualex/Documents/development/universidad/REST_SOAP_RCD_G2/clients/clientforrest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/facualex/Documents/development/universidad/REST_SOAP_RCD_G2/clients/clientforrest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/facualex/Documents/development/universidad/REST_SOAP_RCD_G2/clients/clientforrest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/facualex/Documents/development/universidad/REST_SOAP_RCD_G2/clients/clientforrest/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import cogoToast from\"cogo-toast\";import{useEffect,useState}from\"react\";import\"./index.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialState={rut:\"\",dv:\"\",isLoading:false};function App(){var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var rut=state.rut,dv=state.dv,isLoading=state.isLoading;useEffect(function(){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:\"\"});});},[rut]);function setRut(event){var value=event.target.value;if(value!==null&&isNaN(value)){return;}setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{rut:value});});}function handleCalculateClick(){return _handleCalculateClick.apply(this,arguments);}function _handleCalculateClick(){_handleCalculateClick=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,jsonResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(rut){_context.next=4;break;}setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:\"\"});});return _context.abrupt(\"return\",cogoToast.error(\"Debes ingresar un rut para calcular el digito verificador.\"));case 4:setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:\"\",isLoading:true});});response=fetch(\"\".concat(process.env.REACT_APP_API_URI,\"/getDv\"),{method:\"post\",headers:{Accept:\"application/x-www-form-urlencoded\",\"Content-Type\":\"application/x-www-form-urlencoded\"},body:new URLSearchParams({rut:rut})});_context.next=8;return response.json();case 8:jsonResponse=_context.sent;if(!(jsonResponse&&jsonResponse.data)){_context.next=12;break;}setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:jsonResponse.data,isLoading:false});});return _context.abrupt(\"return\",cogoToast.success(\"Digito verificador calculado con éxito!\"));case 12:_context.next=19;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{dv:\"\",isLoading:false});});cogoToast.error(_context.t0);console.log(_context.t0);case 19:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return _handleCalculateClick.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"header__text\",children:\"Calculadora de digito verificador\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-rut-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"main-rut\",children:[\"RUT\",/*#__PURE__*/_jsx(\"span\",{className:\"sin-dv-span\",children:\"(sin digito verificador)\"})]}),/*#__PURE__*/_jsx(\"input\",{name:\"rut\",value:rut,className:\"main-rut\",id:\"main-rut\",onChange:setRut,autoComplete:\"off\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dv-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dv\",children:\"DV\"}),/*#__PURE__*/_jsx(\"input\",{className:\"dv\",id:\"dv\",value:dv,disabled:true})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"calculate-button\",onClick:handleCalculateClick,children:isLoading?\"Cargando...\":\"Calcular DV\"})]})]});}export default App;","map":{"version":3,"sources":["/Users/facualex/Documents/development/universidad/REST_SOAP_RCD_G2/clients/clientforrest/src/screens/App/index.js"],"names":["cogoToast","useEffect","useState","initialState","rut","dv","isLoading","App","state","setState","prevState","setRut","event","value","target","isNaN","handleCalculateClick","error","response","fetch","process","env","REACT_APP_API_URI","method","headers","Accept","body","URLSearchParams","json","jsonResponse","data","success","console","log"],"mappings":"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","sourcesContent":["import cogoToast from \"cogo-toast\";\nimport { useEffect, useState } from \"react\";\nimport \"./index.css\";\n\nconst initialState = {\n  rut: \"\",\n  dv: \"\",\n  isLoading: false,\n};\n\nfunction App() {\n  const [state, setState] = useState(initialState);\n\n  const { rut, dv, isLoading } = state;\n\n  useEffect(() => {\n    setState((prevState) => ({\n      ...prevState,\n      dv: \"\",\n    }));\n  }, [rut]);\n\n  function setRut(event) {\n    const { value } = event.target;\n\n    if (value !== null && isNaN(value)) {\n      return;\n    }\n\n    setState((prevState) => ({\n      ...prevState,\n      rut: value,\n    }));\n  }\n\n  async function handleCalculateClick() {\n    try {\n      if (!rut) {\n        setState((prevState) => ({\n          ...prevState,\n          dv: \"\",\n        }));\n\n        return cogoToast.error(\n          \"Debes ingresar un rut para calcular el digito verificador.\"\n        );\n      }\n\n      setState((prevState) => ({\n        ...prevState,\n        dv: \"\",\n        isLoading: true,\n      }));\n\n      const response = fetch(`${process.env.REACT_APP_API_URI}/getDv`, {\n        method: \"post\",\n        headers: {\n          Accept: \"application/x-www-form-urlencoded\",\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        body: new URLSearchParams({\n          rut,\n        })\n      });\n\n      const jsonResponse = await response.json();\n\n      if (jsonResponse && jsonResponse.data) {\n        setState((prevState) => ({\n          ...prevState,\n          dv: jsonResponse.data,\n          isLoading: false,\n        }));\n        return cogoToast.success(\"Digito verificador calculado con éxito!\");\n      }\n    } catch (error) {\n      setState((prevState) => ({\n        ...prevState,\n        dv: \"\",\n        isLoading: false,\n      }));\n\n      cogoToast.error(error);\n      console.log(error);\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"header\">\n        <h1 className=\"header__text\">Calculadora de digito verificador</h1>\n      </div>\n      <div className=\"input-group-container\">\n        <div className=\"input-group\">\n          <div className=\"main-rut-group\">\n            <label htmlFor=\"main-rut\">\n              RUT\n              <span className=\"sin-dv-span\">(sin digito verificador)</span>\n            </label>\n            <input\n              name=\"rut\"\n              value={rut}\n              className=\"main-rut\"\n              id=\"main-rut\"\n              onChange={setRut}\n              autoComplete=\"off\"\n            />\n          </div>\n          <div className=\"dv-group\">\n            <label htmlFor=\"dv\">DV</label>\n            <input className=\"dv\" id=\"dv\" value={dv} disabled />\n          </div>\n        </div>\n        <button className=\"calculate-button\" onClick={handleCalculateClick}>\n          {isLoading ? \"Cargando...\" : \"Calcular DV\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}